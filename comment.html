<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Comment</title>
    <link rel="stylesheet" href="comment.css">
</head>
<body>
    <div class="container">
        <div id="post-details" class="post-details"></div>
        <textarea id="comment-input" placeholder="Type your comment here"></textarea>
        <button onclick="addComment()">Add Comment</button>
    </div>

    <script>
        // Load the selected post details
        document.addEventListener("DOMContentLoaded", () => {
            const postId = localStorage.getItem("selectedPostId");
            const postDetails = document.getElementById("post-details");

            // Fetch posts from localStorage
            const posts = JSON.parse(localStorage.getItem("posts")) || [];
            const selectedPost = posts.find(post => post.id == postId);

            // Display the post content if it exists
            if (selectedPost) {
                postDetails.textContent = `${selectedPost.user}: ${selectedPost.content}`;
            } else {
                postDetails.textContent = "Post not found.";
            }
        });

        // Add comment and redirect to main page
        function addComment() {
            const postId = localStorage.getItem("selectedPostId");
            const commentInput = document.getElementById("comment-input").value;

            if (commentInput) {
                // Save the comment to local storage
                const comments = JSON.parse(localStorage.getItem(`commentsForPost${postId}`)) || [];
                comments.push(commentInput);
                localStorage.setItem(`commentsForPost${postId}`, JSON.stringify(comments));

                // Redirect back to main page
                window.location.href = "main.html";
            }
        }
    </script>
</body>
</html>
